{% extends 'base.html.twig' %}

{% block title %}Ajouter un nouveau Produit Recyclable{% endblock %}

{% block body %}
<section class="product-form-section py-5">
    <div class="container">
        <h2 class="form-main-title">Ajouter un nouveau Produit Recyclable</h2>
        
        <div class="form-wrapper"> 
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="form-container">
                        <h3 class="section-subtitle"><i class="fa fa-edit mr-2"></i>Détails du Produit</h3>
                        
                        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'novalidate': 'novalidate'}}) }} 

                        {# Zone d'upload d'image #}
                        <div class="form-group mb-4">
                            {{ form_label(form.image) }}
                            {{ form_widget(form.image, {'attr': {'class': 'form-control-file'}}) }}
                            {{ form_errors(form.image) }}
                            
                            {# Affichez l'image existante #}
                            {% if materielRecyclable is defined and materielRecyclable.image %}
                                <div class="mt-3">
                                    <img 
                                        src="{{ asset('materielimage/' ~ materielRecyclable.image) }}" 
                                        alt="Prévisualisation de l'image" 
                                        class="img-thumbnail" 
                                        style="max-width: 200px;"
                                    >
                                    <small class="d-block mt-1">Fichier actuel : {{ materielRecyclable.image }}</small>
                                </div>
                            {% endif %}
                        </div>

                        {# Champs du formulaire #}
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="name" class="input-label">Nom du produit</label>
                                    {{ form_widget(form.name, {
                                        'attr': {
                                            'class': 'form-control',
                                            'id': 'name',
                                            'required': 'required'
                                        }
                                    }) }}
                                    {{ form_errors(form.name) }}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="datecreation" class="input-label">Date de création</label>
                                    {{ form_widget(form.datecreation, { 'attr': {'class': 'form-control'} }) }}
                                    {{ form_errors(form.datecreation) }}
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="description" class="input-label">Description</label>
                            {{ form_widget(form.description, {
                                'attr': {
                                    'class': 'form-control',
                                    'rows': 3,
                                    'id': 'description',
                                    'required': 'required'
                                }
                            }) }}
                            {{ form_errors(form.description) }}
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="typemateriel" class="input-label">Type de matériau</label>
                                    {{ form_widget(form.typemateriel, {
                                        'attr': {
                                            'class': 'form-control select-center',
                                            'id': 'typemateriel',
                                            'required': 'required'
                                        }
                                    }) }}
                                    {{ form_errors(form.typemateriel) }}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="entreprise" class="input-label">Entreprise</label>
                                    {{ form_widget(form.Entreprise, {
                                        'attr': {
                                            'class': 'form-control',
                                            'id': 'Entreprise',
                                            'required': 'required'
                                        }
                                    }) }}
                                    {{ form_errors(form.Entreprise) }}
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-btn">
                            <i class="fa fa-save mr-2"></i>Enregistrer
                        </button>

                        {{ form_end(form) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
